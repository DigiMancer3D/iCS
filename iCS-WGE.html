<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>iCS-WGE</title>
<meta name="viewport" content="width=device-width,initial-scale=1">
<style>
:root { --silver: #CCC; --black: #111; --neon: #53ffae;}
body { background: var(--black); color: var(--silver); font-family: system-ui,sans-serif; margin: 0; min-height: 100vh;}
h1 { text-align:center; font-size:2.5rem; font-weight:bold; margin: 1rem 0 0.5rem 0; color:var(--silver); text-shadow:0 0 12px #0f2,0 0 10px #222;}
#inputRow { display:flex;justify-content:center;flex-wrap:wrap;gap:1rem;margin:2rem auto 0.5rem auto;width:90%;position:relative;}
.inputCol { background:#181818;border-radius:14px;flex:1 1 320px;max-width:440px;min-width:240px;margin:0 4px;box-shadow:0 2px 12px #000a;display:flex;flex-direction:column;align-items:center;padding:1rem 0.5rem 1.5rem 0.5rem;}
.inputCol h3 { margin:0.5rem 0 0.4rem 0;font-size:1.3rem;font-weight:bold;color:#eee;text-align:center;}
input[type="text"] { background:#222;color:var(--silver);border:2px solid #444;border-radius:5px;font-size:1.15rem;padding:8px 10px;width:80%;margin:0.1rem 0 0.25rem 0;text-align:center;outline:none;}
input[type="text"]:hover, input[type="text"]:focus { border-color:#39f;}
.inputCol p { min-height:28px;font-size:1rem;margin:0.35rem 0 0.25rem 0;text-align:center;word-break:break-all;}
.neon-gram {color:var(--neon);text-shadow:0 0 6px var(--neon),0 0 16px #2f8;font-weight:bold;background:linear-gradient(90deg,#112,#004a2d14);border-radius:8px;padding:2px 7px;display:inline-block;}
.copyBtn {margin-left:4px;vertical-align:middle;border:none;background:none;color:#53ffae;font-size:1.04em;cursor:pointer;}
.copyBtn:active {color:#21bc7c;}
button { background:#000;color:var(--silver);border:2px solid #888;border-radius:24px;font-size:1.1rem;padding:0.25em 1.5em;margin:0.3rem 0 0.6rem 0;font-weight:500;cursor:pointer;transition:box-shadow .2s,border-color .2s;}
button:disabled {border-color:#333;color:#777;background:#181818;cursor:not-allowed;}
button:not(:disabled):hover,.overlayBtn:hover {border-color:#53ffae;box-shadow:0 0 16px var(--neon);color:#fff;}
.overlayBtn {background:#151;color:#fff;border:2.5px solid #53ffae;font-size:1.15rem;border-radius:11px;position:absolute;left:50%;top:55%;transform:translate(-50%,-50%);padding:18px 33px;box-shadow:0 4px 32px var(--neon),0 2px 10px #000a;font-weight:bold;z-index:200;opacity:1;transition:opacity .6s;}
.overlayBtn.fading{opacity:0;}
@media (max-width:600px){
  #inputRow { flex-direction:column;gap:1.6rem;margin-top:1.2rem;}
  #dbHashBtnWrap { position:relative;left:0;transform:none;width:100%;top:0;display:flex;justify-content:center;}
}
@media (max-width:480px){
  h1{font-size:1.25rem;}
  .inputCol{min-width:unset;font-size:0.97rem;}
}
#dbHashBtnWrap { position: absolute; left: 50%; transform: translateX(-50%); width:100%; display:flex; justify-content:center; pointer-events:none; top:65%; z-index:199;}
hr { border:0;border-top:2px solid #333;margin:1rem 0;}
#indexBlock {max-width:1200px;margin:0 auto;background:#181818;border-radius:13px;min-height:320px;box-shadow:0 0 14px #000c;padding:2px;position:relative;}
#tabs { white-space:nowrap;overflow-x:auto;padding:0.6em 2px 0.3em 2px;background:#161616;border-radius:8px 8px 0 0;display:flex;gap:2px;align-items:center;position:relative;scroll-behavior:smooth;}
.tabBtn {display:inline-block;border:1px solid #888;background:#222;color:#ccc;margin-right:3px;border-radius:8px 8px 0 0;padding:0.5em 1.2em;font-weight:bold;font-size:1.08em;cursor:pointer;transition:background .15s, color .13s, border-color .19s;}
.tabBtn.selected {background:var(--silver);color:#181818;border-color:#39f;z-index:3;}
.tabBtn:active {background:#ffd;color:#181818;}
#tabScrollLeft,#tabScrollRight {position:absolute;top:6px;height:30px;width:28px;border-radius:8px;background:#111e;color:var(--silver);border:none;cursor:pointer;font-size:1.22em;font-weight:bold;z-index:10;transition:opacity .13s;}
#tabScrollRight {right:3px;}
#tabScrollLeft {left:3px;}
#tabContent {background:#202025;min-height:120px;padding:1.4em 2vw;border-radius:0 0 9px 9px;transition:background .16s;margin-bottom:0.7em;font-size:1.07em;}
#collapseBtn {position:absolute;top:10px;right:15px;background:var(--silver);color:#222;border:none;border-radius:12px;font-size:1.6rem;font-weight:bold;cursor:pointer;padding:2px 19px;z-index:30;}
textarea {background:#191a1d;color:#ededed;border-radius:7px;width:98%;border:1.5px solid #333;font-size:1em;padding:10px;margin-top:4px;resize:vertical;min-height:120px;}
.tab-footer {display: block;color: #53ffae;font-weight:bold;margin:1.2em 0 0.4em 0;font-size:1.04em;text-shadow:0 0 8px #53ffae,0 0 24px #222;}
#filePickerWrap {text-align:center;margin-top:2em;display:none;}
</style>
</head>
<body>
<h1>interactive Character Sheet Word-Gram Encoder (iCS-WGE)</h1>
<div id="inputRow">
  <div class="inputCol" id="colCategory">
    <h3>Category</h3>
    <input type="text" id="catInput" placeholder="Add category">
    <p id="catFeedback">&nbsp;</p>
    <button id="catAddBtn" disabled>Add Category</button>
  </div>
  <div class="inputCol" id="colWord" style="position:relative;">
    <h3>Object Word</h3>
    <input type="text" id="wordInput" placeholder="Add word">
    <p id="wordFeedback">&nbsp;</p>
    <button id="wordAddBtn" disabled>Add Word</button>
  </div>
  <div id="dbHashBtnWrap" style="display:none;"></div>
</div>
<hr>
<div id="indexBlock">
  <div id="tabs"></div>
  <button id="tabScrollLeft" style="display:none;">&#8592;</button>
  <button id="tabScrollRight" style="display:none;">&#8594;</button>
  <div id="tabContent"></div>
  <button id="collapseBtn" style="display:none;" title="Collapse Index">&#x2191;</button>
</div>
<!-- Manual loader (always available) -->
<div id="filePickerWrap">
  <label style="color:orange;font-weight:bold;">Manual load: Select your iCS Rec.list file</label><br>
  <input type="file" id="filePicker" accept=".list,.txt,text/plain">
  <button id="loadFileBtn" disabled>Load Dictionary Now</button>
  <button onclick="closeFilePicker()">Close Importer</button>
</div>
<script>
'use strict';
// ----- Deduplication -----
const canonicalMap = {
  knife: ["knife", "nife", "kife", "nkife"], shield: ["shield", "sheild", "shild", "sheld"], distress: ["distress", "distresss", "distresses"]
};
function canonicalize(word) {word = word.trim().toLowerCase();for (const canon in canonicalMap) {if (canonicalMap[canon].includes(word)) return canon;}let ieFlip = word.replace(/ie/g, "ei").replace(/ei/g, "ie"); if (ieFlip !== word) return ieFlip;if (word.match(/(.+)s$/)) return word.replace(/s+$/,"");if (word.match(/(.+)ies$/)) return word.replace(/ies$/,"y");return word; }
// --- Embedded DB ---
const embeddedDatabase = {
  "Weapons": ["weapon", "sword", "axe", "knife", "nife", "kife", "shield", "sheild", "shild", "sheld", "hammer", "bow", "shield", "broadsword", "knife", "nife", "kife", "butcher", "blade", "nail", "scyth", "sicle", "sickle", "sikle", "fan", "mace", "dagger", "long axe", "2-handed", "shears", "sai", "javelin", "trident", "spear", "spears", "staff", "stalves", "bomb", "granade", "tonfa", "nunchucks", "lightsaber", "lightsabor", "caltdrops", "pick", "pickaxe", "sling", "blow gun", "blowgun", "darts", "dart", "sledgehammer", "spade", "gun", "rifle", "machinegun", "machine gun", "ammo", "ammunition", "ammu", "whip", "nine tails", "9-tails", "9tails", "nine-tails", "9 tails", "tail", "surujin", "stars", "throwing", "throw", "throws", "flail", "net", "spiked", "spike", "crossbow", "crossbows", "shells", "cannon", "balls", "ball", "weaponized pad", "weaponized bracer", "weaponized bracers", "thorn", "thorns", "charkram", "morning-star", "morningstar", "morning star", "rapier", "bastard", "long-sward", "longsword", "lance", "long-sword", "short", "short sword", "shortsword", "short-sword", "sward", "battleaxe", "light crossbow", "starknife", "longspear", "long spear", "spiked chain", "chain", "ranseur", "club", "spiked club", "boomerang", "halbred", "shotgun", "nuke", "nuclear arms", "nuclear arm", "blaster", "pistol", "blaster rifle", "blaster pistol", "darksaber", "darksabor", "lightsaber pike", "pike", "honor guard rifle", "smoke bomb", "somkebomb", "flashbang", "flame rifle", "flamethrower", "dual lightsaber", "dual lightsabor", "quad cannon", "dual cannon", "booma", "missle launcher", "MLRS", "mlrs", "usp", ".45", "magnum", ".44", "m9", "desert eagle", "pp2000", "bbgun", "bb", "pp", "g18", "m93", "raffica", "tmp", "machine pistol", "spas", "spas-12", "spas12", "aa-12", "aa", "12", "striker", "ranger", "sawedoff", "sawed off", "m1014", "1014", "1887", "model 1887", "at4", "rpg", "rpg7", "rpg-7", "m79", "stinger", "excalibur", "cloud sword", "pistol sword", "bladed pistol", "bayentte", "bayonetta", "talon", "war-axe", "eared", "glavie", "boar pike", "boarpike", "partizan", "poke-axe", "awi-pike", "awi", "awl", "guisarme", "bills", "swiss bill", "voulge", "fork", "manarifle", "polearm", "handaxe", "rod", "manapistolsaya", "ninja-to", "ninjato", "katana", "kuhai", "shuriken", "makibishi", "shuko", "plasma sword", "plasmasword", "plasma", "ma4d", "br55", "ma7b", "ma5c", "ma5k", "mr55-m45", "m45", "ma6c", "ma5b", "m8", "smg", "br55at", "br55at-ww", "br55cw-sa", "m7", "ma2b", "ma4k", "m6b", "m6D", "m6x", "br55hg", "saw", "sawgun", "shotty", "br55dm-r", "sniperifle", "sniper rifle", "sniperrifle", "br55-ss", "m90", "mk1", "mk 1", "mk 2", "mk2", "ssm", "cqc", "m6j", "m6c", "m6e", "cw", "stanchion", "m99 stanchion", "aptr", "ma4b-aptr", "1173", "m90 1173", "punisher", "brute shot", "beam rifle", "carbine", "h2", "h1", "fuel rod", "fuel rod gun", "needler", "gravity hammer", "fist of rukt", "rukt", "spiked bomb", "plasma cannon", "gravity gun", "portalgun", "portal gun", "megaman", "megagun", "meagman gun", "frizbar", "gale", "claw", "double dragon", "sucker punch", "masamune", "gladius", "spatha", "home-wrecker", "homewecker", "ture blade of the east", "eastern blade", "guan dao", "naginata", "kopis", "famboyant", "pattah", "ajanta", "barabudur", "konarak", "katti", "natar temple sword", "ram dao", "ram horn", "kukri", "kora", "kukri", "hostala", "ellora", "katar", "wrist blade", "hatchet hands", "hatchet", "cestus", "claws", "blade talons", "blade talon", "hatchet hand", "wrist blades", "scissors", "scissors katar", "quhab", "fascia", "hand scythe", "scythe", "swayyah", "war fist", "natalya mark", "Natalya's mark", "natalyas mark", "uzi", "urumi", "vadi", "otta", "colt", "beretta", "9mm", "22", "long rifle", "sub-machine", "submachine", "sub machine gun", "sub-machine gun", "submachine gun", "assult rifle", "ar15", "ar16", "ar18", "m1", "granade launcher", "moltav", "tekko", "stiletto", "wand", "wands", "limb", "arm", "leg", "pipe", "monkeywrench", "pipewrench", "metal", "strut", "arm", "prostetic", "prosthetic", "mechanical", "biological", "extension", "limb"],
  "Bow & Crossbow ammo": ["arrow", "arrows", "twig", "stick", "bolt", "bolts"],
  "Armors": ["tunic", "armor", "glove", "helmet", "helm", "hat", "hood", "chest plate", "chestplate", "breast plate", "breastplate", "guard", "shoe", "garb", "shoes", "boots", "sneakers", "runners", "streamers", "gloves", "comb", "visor", "gorget", "pauldron", "counter", "rerebrace", "brace", "plackart", "fauld", "tasset", "tassle", "tassel", "cuisse", "gauntlet", "gauntlets", "fan-plate", "fan plate", "fanplate", "greave", "greeve", "sabaton", "stop rib", "stoprib", "rib", "gardbrace", "vambrace", "fauld", "mail", "chainmail", "platemail", "cloth", "leather", "kabuto", "nodowa", "sode", "sendan-no-ita", "sendan no ita", "sendannoita", "kote", "kasazuri", "haidate", "sune-ate", "sune ate", "suneate", "kyahan", "isurumaki", "do", "shoulder armor", "soulderarmor", "hand guard", "tekko", "hakama", "pants", "thigh guard", "thighguard", "tassets", "tasset", "tabi", "socks", "hitatare", "robe", "shirt", "nape guard", "napeguard", "shikoro", "helmet crest", "hemlmetcrest", "maedate", "watagami", "shoulder strap", "shoulderstrap", "strap", "bascinet", "vervelles", "aventail", "spaulder", "haubergeon", "lames", "demi", "denim", "wing", "gatlings", "wrist gauntlets", "wristgauntlets", "wrist bracers", "bracer", "crotch plate", "thigh guanlets", "knee pads", "kneepads", "utility belt", "belt", "suspenders", "torso guard", "torso plate", "torso pad", "arming cap", "armingcap", "cap", "doublet", "chain maille", "chainmaille", "chainmalle", "chain malle", "hose", "pantyhose", "lingera", "lungera", "crowl", "salade", "salet", "schalern", "bevor", "beavor", "placard", "tuille", "buckle", "belt buckle", "skull", "sight", "besagne", "kettle helm", "fur", "cape", "bag", "pouch", "focus", "sandles", "sandels", "tubesocks", "knee high", "stiletos", "stileto", "curb stompers", "curbstompers", "kleats", "kleets", "kelt", "sporran", "sgain", "flashers", "brogues", "ghillie", "argyll", "leather hat", "leather cap", "leatehr jacket", "leather armor", "leather pants", "leather shoes", "jacket", "pin", "scarf", "straps", "cloak", "hooded cloak", "sock", "sandel", "shroud", "moccasins", "jynco", "mjolnir", "powered assult armor", "powered armor", "beanie", "Link's Hat", "Links Hat", "Link Hat", "Mark V", "Master Chiefs", "Mark VI", "tshirt", "t-shirt", "v-neck", "vneck", "turtleneck", "sweater", "parka", "wind breaker"],
  "Wearables": ["jewerly", "ring", "necklace", "earrings", "hoops", "hoop", "piercing", "piercings", "rings", "necklaces", "earring", "ear hoop", "ear ring", "earhoop", "earloop", "ear loop", "ear chain", "earchain", "neckchain", "neck chain", "pendant necklace", "arm bands", "wrist bands", "bangels", "bangel", "bangle", "collar", "chocker", "princess", "matinee", "opera", "lariat", "rope necklace", "neck rope", "neckrope", "channel", "bezel", "pave", "three-stone", "-stone", "inspired", "prong", "halo", "split shank", "splitshank", "solitaire", "industrial", "forward helix", "helix", "flat", "curved barbell", "anti helix", "anti-helix", "antihelix", "snug", "targus", "dermial", "micro-dermial", "microdermial", "upper lobe", "lobe", "bridge", "third eye", "nasallang", "austin bar", "septril", "septum", "rhino", "medussa", "medusa", "sports ring", "champion ring", "captive bead ring", "navel", "navel ring", "choker"],
  "Elements": ["fire", "cold", "ice", "wind", "sun", "dark", "rosen", "natrual", "enfluenced", "high", "techy", "fearfull", "feared", "fearless", "hyped", "electric", "earthed"],
  "Element Title Triggers": ["Dragonbreath", "Icebreath", "fogbreath", "fire", "flame", "flarred", "fanned", "chared", "char", "campfire", "torch", "torched", "flamed", "dragon breath", "scorched", "chorched", "charcoal", "on fire", "flaming", "hot", "heat", "cold", "snow", "snowing", "frostbite", "frost", "frosted", "frosting", "frothed", "frothy", "chilled", "chilly", "frosty", "blue snake bite", "tundra", "hypothermia,crisp", "sharp", "edged", "leveled", "ready", "blizzard", "ice", "frozen", "freezer burn", "ice burn", "cold burn", "airy", "airey", "aireay", "aired", "airee", "wind", "gusts", "huricane", "hurican", "tornado", "sunny", "spring", "bright", "sunny", "sun", "flared", "sunrays", "sun rays", "rays", "light", "dreary", "deary", "gloomy", "goth", "gothic", "punk rock", "metal", "death", "dark", "night", "moon", "starie", "stary", "staree", "reflect", "portal", "multiverse", "multplex", "multi-universe", "metaverse", "metaversal", "universal", "nebula", "cloud", "cloudy", "complex", "rose", "strong", "natrual", "stone", "granite", "onxy", "crystal", "crystaline", "prisym", "prisim", "prysim", "rainbow", "skidish", "stitich", "sketch", "stetch", "wretch", "wicked", "green", "420", "smoke", "toke", "bruh", "brosiv", "herb", "marijuana", "smoked", "joint", "blunt", "stash", "technical", "electrician", "technician", "mechanical", "geared", "engerniered", "engerneer", "engineer", "engineered", "engineering", "unsure", "unaware", "unspoken", "hesited", "scared", "shocked", "possesed", "haunted", "horror", "horrific", "scary", "feared", "spook show", "manslaughter", "holy", "higher", "power", "above", "regard", "missle", "marine", "god-like", "god like", "demigod", "demegod", "god son", "god daughter", "soul", "reaper", "heaven", "angel", "god", "jesus", "marry", "susan", "geroff", "gregory", "leslie", "belief", "gods", "spark", "sparky", "sparked", "shocked", "elctro", "electric", "galantic", "galaxian", "galatical", "volts", "amps", "spider", "grounded", "land", "solid", "landed", "landing", "low"],
   "Readables": ["page", "tomb", "scroll", "spellbook", "spell book", "book", "bible", "quran", "bhagavad Gita", "bhagavad", "composition", "torah", "spiral", "notebook", "diary", "scripture", "vedas", "upanishads", "upanishad", "brahmana", "aranyaka", "dhanurveda", "ayurveda", "upa-vedas", "upa-veda", "veda", "sruti", "smriti", "ithihasa", "mahabharata", "ramayana", "purana", "agama", "darshana", "mahapurana", "mahapurava", "upa", "upa puranad", "puranad", "puranas", "purana", "vasihnava", "shaiva", "saktha", "nyaya", "vaisheshika", "sankhya", "yoga", "mimamsa", "uttara", "pentateuch", "genesis", "exodus", "leviticus", "deuteronomy", "psalms", "proverb", "proverbs", "ecclesiastes", "sirach", "vajur", "sama", "kojiki", "adi", "granth", "orthodox", "book of mormon", "necronomacon", "perbindeshi", "lolita", "decameron", "droll", "cookbook", "handbook", "letter", "works", "works of", "mein kampf", "rangila rasul", "stanic verses", "satanic bible", "lajja", "zhuan falun", "papers", "paper", "death note", "deathnote", "zhou enlai", "mao", "bloody myth", "capital and ideology", " of life", "les moeurs", "Les Mœurs", "suicide note", "suicidenote", "ivanhoe", "oliver twist", "manifesto", "the jungle", " of erotic", "world of ", "die gesteinigten", "question of guilt", "lysistrata", "El Señor Presidente", "el senor presidente", "hind swaraj", "jugbani", "durdiner", "zatri", "bisher bashi", "vangar gaan", "chandrabindu", "islam through hadis", "annexation of sikkim", "soft target", "furqan", "shivaji", "jinnah", "great soul", "bulpington", " of blup", "brave new world", "of good will", "the martyr", "laws of life", "the constitution", " constitution", "bill of", "bill of rights", "honourable estate", "dutch interior", "borstal boy", "little black sambo", "sambo", "little black book", "black book", "green book", "white book", "red book", "yellow book", " book", "sophies choice", "Sophie's Choice", "schindlers ark", "Schindler's Ark", "da vinci code", "programming", "language", "code", " code", "codex", "grover", " of light", "fity shade", " of sanity", "rebirth:", " rebirth", "rebirth ", "gay is", "peichi", "பேய்ச்சி", "notre ami le roi", "le roi predateur", "le roi", "the rape of sita", " of sita", "cover-up general", "coverup genera", "cover up general", "inter the river", "great replacement", "my watch", "fra kristiania-bohemen", "fra kristiania", "albertine", "snorri the seal", "of the red ruby", "satyarth prakash", "satyarth", "prakash", "jinnah of", "about muhammad", "noli me tangere", "untold story", "political dos", "document", "documents", "may handlang ang umaga", "kalatas", "labas", "mirror of the polish crown", "historia do mundo para as criancas", "mundo para as", "the boys", "man who wouldn't stand up", "man who wouldnt stand up", "love comes later", "thalia", "new world translation", "king james", " version", "rights of man", "looing backward", " elders of zion", "protocols", "protocol", "animal farm", "1984", "ninteen eighty-four", "ninteen eighty four", "nineteen eightyfour", "doctor zhivago", "one day in ", "the life of", "first circle", "the circle", "gulag archipelago", "apocalypse", "queen of sheba", "goat days", "frzai-e-amaal", "frzai e amaal", "value", "price and profit", " profit", "and state", "& state", "of surplus value", "anarchism or socialism", "marxism", "marxist", "marx", "heroines", " and revolution", " & revolution", "time", "foward", " of the USSR", " is all about", "wisdom of jihad", "wisdom of", "that nullify", "red lines", "frankenstein", "world of", " of africa", "soul on ice", " is my life", "burger's daughter", "burgers daugher", "julys people", "jul's people", "year 501", "bad samaritans", " samaritan", " samaritans", "one spoon on this earth", "ulysses", "devil's discus", "devil discus", "devil bible", "devil's bible", "king never smiles", "areopagitica", "rights of man", "lord horror", "anarchist cookbook", "kill or get killed", "canterbuy tales", "tales", "meritorious price of our redemption", "moll flanders", "fanny hill", "candide", "uncle tom's cabin", "uncle toms cabin", "elmer gantry", "tropic of cancer", "forever amber", "grapes of wrath", "howl", "pedagogy of the oppressed", "federal mafia", "60 years later", "operation dark heart", "paradise of the blind", "nickel-plated-feet gang", "les pieds", "dans le maquis", "new class", "curved river", "on fierce wound", "thoughts of a corpse", "storytellers", "of the wind", "deuterocanon", "epistles", "canon law", "common law", "law", "protestant bible", "apocrypha", "manasseh", "chronicles", "maccabees", "enoch", "titus flavius", "wycliffe", "hussite", "reformation", "deuterocanonical", "luther bible", "lutheran bible", "lutheran", "tyndale", "of jonah", "geneva bible", "coverdale", "dutch bible", "casiodoro de reina", "bear bible", "biblia del oso", "alfonsia", "cipriano de valera", "valera", "pocket bible", "pocket book", "jewish hebrew bible", "protocanon", "protocanonical", "interestamental", "robit", "ecclesiasticus", "baruch", "susanna", "bel and the dragon", "lined paper", "rag paper", "handbill", "tag", "poster", "bound words", "bound texts", "sea scrolls", "dead sea scroll", "sea scroll", "words", "scribing", "scribings", "spell", "spell book", "spell page", "spell scroll", "sealed", "opened", "manual"],
   "Writables": ["spiral", "papers", "paper", "deed", "bounty", "journal", "blank", "blank book", "unsealed", "notebook"],
   "Villages": ["Kochan", "Ablanista", "Koprivlen", "Laki", "Nova Lovcha", "nova Leski", "Paril", "Petrelik", "Babyak", "Floating Villages", "Bibury", "Ait-Ben-Haddou", "Hallstatt", "Juzcar", "Eze", "Inle Lake", "Lamayuru", "Isla Del Sol", "Del Sol", "Larung Gar", "Larung", "Marsaxlokk", "Oia", "Navala", "Navala Village", "Floating", "Floating Village", "Enkeri", "Enkeri Village", "Nubian", "Bubia", "Nubia", "Nubian Village", "Nuuk", "Pariangan", "Palangan", "Punji", "Pygmy", "Batwa", "Pygmy Batwa", "Pygmy Village", "Batwa Village", "Shirakawa", "Xidi", "Swat Valley", "Wenen", "Jukkasjarvi", "Kash Goz", "Kash", "Goz", "Giethoorn", "Gasadalur", "Freundenberg", "Zell am See", "Wagrain", "Sauris-Zahre", "Isola del Giglio", "Castelo Novo", "Castelo", "Novo", "Rasinari", "Bohinj", "Rupit", "Murten", "Andermatt", "Birgi", "Thai Hai", "Guadalupe", "Old Town", "Choke Mountains Ecovillage", "Aguarico", "Angochagua", "Mestia", "Kfar Kama", "Umm Qais", "Creel", "El Fuerte", "Ksar Elkhorbat", "Moulay Bouzerktoune", "Lamas", "Raqchi", "Pyeongsa-ri", "Pyeongsa"],
   "Towns": ["Smalltown", "Albarracin", "Ban Rak", "Ban Rak Thai", "Rak Thai", "Banos", "Bar Harbor", "Biei", "Bled", "Bocas del Toro", "Bocas", "del Toro", "Carmel-by-the-Sea", "Colonia del Sacramento", "del Sacramento", "Colonia", "Castle Combe", "CastleCombe", "Combe", "Esperance", "Gokayama", "Gordes", "Goreme", "Guatape", "Hatta", "Ilulissat", "Iruya", "Itchan Kala", "Kaikoura", "Kalk Bay", "Kralendijk", "Lamu", "Lauterbrunnen", "Luang Prabang", "Luang", "Prabang", "LuangPrabang", "Luderitz", "Lunenburg", "Mandawa", "Moulay", "Idriss", "Moulay Idriss Zerhoun", "Zerhoun", "Navala", "Niagra-on-the-Lake", "Paraty", "Penglipuran", "Port Fairy", "Praiano", "Raquira", "Rothenburg ob der Tauber", "ob der Tauber", "Tauber", "Sai Kung", "Sapa", "Sayulita", "Sedona", "Sidi Bou Said", "Sidi", "Bou", "Bou Said", "Sitka", "Siwa", "St Augustine", "Augustine", "St. Augustine", "Saint Augustine", "Tepoztlan", "Vinales", "Zhouzhuang", "Wallace", "Marfa", "Jim Thorpe", "Bisbee", "Eureka Springs", "Yellow Springs", "Helen", "Whitefish", "Taos", "Mount Dora", "MountDora", "Astoria", "Lanesboro", "Hillsboro", "Galena", "New Harmony", "Salina", "Lindsburg", "Joseph", "Lititz", "Beaufort", "Port Townsend", "Townsend", "Ferndale", "Breaux Bridge", "Eclectic", "Delight", "Why", "Unalaska", "Rough and Randy", "Rough & Randy", "Mystic", "Superior", "Slaughter Beach", "Enigma", "Sandwich", "Electric City", "Cal-Nev-Ari", "Tightsqueeze", "Tuxedo", "Loveladies", "Truth or Consequences", "What Cheer", "Bald Head", "Halfway", "Hometown", "West Virigina", "Hometown,West Virigina", "Satan's Kingdom", "Satan's Kingdom", "Satans Kingdom", "North Star", "Hot Coffee", "Monkey's Eyebrow", "Monkey's Eyebrow", "Monkeys Eyebrow", "Monkies Eyebrow", "Intercourse", "Waterproof", "Tiki Island", "Valentine", "Sweet Lips", "Elmo", "Wineglass", "Miner's Delight", "Miner's Delight", "Miners Delight", "Normal", "Santa Claus", "Defiance", "Dead Women Crossing", "Sublimity", "Yeehaw Junction", "Bread Loaf", "BreadLoaf", "Kismet", "Ketchuptown", "Love Valley", "Luck", "Humansville", "Porchupine", "Killdeer", "Volcano Village", "Good Grief", "Woonsocket", "Upton Snodsbury", "Pucklechurch", "Barton in the Beans", "Curry Mallet", "Droop", "Throop", "Plumpton", "Lickfold", "Warninglid", "Nomansland", "Uploders", "Matching Tye", "MatchingTye", "Nether Wallop", "NetherWallop", "Poling", "Patching", "Climping", "Didling", "Crudwell", "Puddletown", "Tolpuddle", "Affpuddle", "Braintpuddle", "Westward Ho!", "WestwardHo!", "Westward Ho", "WestwardHo", "Upper Bucklebury", "UpperBucklebury", "Mudford Sock", "MudfordSock", "New Invention", "NewInvention", "picklescott", "Marsh Gibbon", "MarshGibbon", "Blubberhouses", "Mamble", "Tedstone Wafre", "TedstoneWafre", "Hose", "Hoby", "Shoby", "Thumpton", "Bitchfield", "Over Peover", "OverPeover", "Wetwood", "Wetwang", "Papplewick", "Bishop's Ichington", "Bishop's Ichington", "Bishops Ichington", "Bishop'sIchington", "Bishop'sIchington", "BishopsIchington", "Queen Camel", "QueenCamel", "Great Snoring", "GreatSnoring", "Cement", "Laramie", "Larrimah", "Bidgeegud", "Derby", "Lawton", "Alesund", "Bruges"],
   "Cities": ["Abidjan", "Accra", "Adana", "Addis Ababa", "Adelaide", "Agre", "Ahmadabad", "Aleppo", "Aleppohalab", "Aleepo Halab", "Alexandria", "Algiers", "Allahabad", "Almaty", "amman", "Amristar", "Ankara", "Anshan", "Baghdad", "Baku", "Bandung", "Bangalore", "Bangkok", "Baotou", "Barcelona", "Barquisimeto", "Barranquilla", "Basrah", "Beijing", "Beirut", "Belem", "Belgrade", "Belo Horizonte", "BeloHorizonte", "Benghazi", "Benin", "Berlin", "Bhopal", "Birmingham", "Bogo Ta", "Bogota", "BogoTa", "Bogo", "Brasilia", "Brazzaville", "Brisbane", "Bucharest", "Budapest", "Buenos Aires", "Bursa", "Busan", "Cairo", "Cali", "Campinas", "Capetown", "Caracas", "Casablanca", "Changchun", "Changsha", "Changzhou", "Chelyabinsk", "Chengdu", "Chennai", "Chicago", "Chittagong", "Chongquin", "Ciudad Juarez", "CiudadJuarez", "Conakry", "Copenhagen", "Cordoba", "Curitiba", "Daegu", "Daejon", "Dakar", "Dalian", "Dallas", "Damascus", "Dar es Salaam", "DarEsSalaam", "DaresSalaam", "Dar Es Salaam", "Datong", "Delhi", "Dhaka", "Dnipropetrovsk", "Donetsk", "Douala", "Durban", "Ecatepec", "Ekaterinburg", "Faislabad", "Fortaleza", "Foshan", "Freetown", "Fukoka", "FreeTown", "Fuzhou", "Giza", "Goiania", "Gudalajara", "Guangzhou", "Guarulhos", "Guatamala City", "Guayaquil", "Guiyang", "Gujranwala", "Gwangju", "Wala Wala Washinton", "WalaWala", "Wala Wala", "WalaWalaWashinton", "Gwangju", "Haiphong", "Hamburg", "Handan", "Hangzhou", "Hanoi", "Haora", "Harare", "Harbin", "Havana", "Hefei", "Hiroshima", "Ho Chi Minh City", "HoChiMinh", "HoChiMinhCity", "Ho Chi", "Chi Minh", "Ho Chi Minh", "Minh City", "HCMC", "Hong Kong", "Houston", "Hyderabad", "Ibadan", "Incheon", "Indore", "Irbil", "Isfahen", "Istanbul", "Izmir", "Jaipur", "Jakarta", "Jeddah", "Jilin", "Jilan", "Jodphur", "Johannesburg", "Kabul", "Kaduna", "Kano", "Kanpur", "Kaohsiung", "Karachi", "Kawasaki", "Kazan", "Kharkiv", "Khartoum", "Khulna", "Kiev", "Kinshasa", "Kitakyushu", "Kobe", "Kolkata", "Kowloon", "Kuala Lumpur", "KualaLumpur", "Kunming", "Kyoto", "La Paz", "LaPaz", "Lapaz", "Lagos", "Lahore", "Lanzhou", "Lean", "Lima", "London", "Los Angeles", "Luanda", "Lubumbashi", "Lucknow", "Ludhiana", "Luoyang", "Lusaka", "Madrid", "Maiduguri", "Makassar", "Managua", "Manaus", "Manila", "Maputo", "Maracaibo", "Mashhad", "Mecca", "Medellin", "Medina", "Meerut", "Melbourne", "Mexicali", "Mexico City", "Milsan", "Minsk", "Mogadishu", "Monterrey", "Montevideo", "Montreal", "Moscow", "Mosul", "Multan", "Mumbai", "Mumbai Bombay", "MumbaiBombay", "Bombay", "Munich", "Nagoya", "Nagpur", "Nairobi", "Nanchang", "Nanjing", "Nanning", "Napoli", "Nashik", "New York City", "New York", "NYC", "Big Apple", "NewYork", "NewYorkCity", "NYCity", "Nesahualcoyotl", "Nizhny Novgorod", "NizhnyNovgorod", "Novosibisrk", "Odessa", "Omdurman", "Omsk", "Osaka", "Palembang", "Paris", "Patna", "Perm", "Perth", "Peshawar", "Philadelphia", "Phily", "Philly", "Phnom Penh", "PhnomPenh", "Phnompenh", "Phnom", "Penh", "Phoneix", "Phoenix", "Pimpri Chinchwad", "PimpriChinchwad", "Pimpri", "Chinchwad", "Port Harcourt", "Harcourt", "PortHarcourt", "Port-Au-Prince", "Port Au Prince", "Port Prince Gold", "Prince Gold Port", "Port Gold Prince", "PortAuPrince", "AuPrince", "Au Prince", "Porto Alegre", "Portoalegre", "PortoAlegre", "Prague", "Puebla", "Pune", "Pyongyang", "Quingdao", "Qiqihar", "Quito", "Rabat", "Rajkot", "Ranchi", "Rawalpindi", "Recife", "Rawalpindi", "Rio de Janerio", "RiodeJanerio", "RioDeJanerio", "de Janerio", "Rio", "Janerio", "Riyadah", "Rome", "Rosario", "Rostov on Don", "Rostov", "on Don", "Don Rostov", "Salvador", "Samara", "San Antonio", "Antonio", "San Diego", "DanDiego", "Sanaa", "Santa Cruz", "SantaCruz", "San Tiago", "Santiago", "Tiago", "Cruz", "Santo Domingo", "Domingo", "SantoDomingo", "Sao Paulo", "SaoPaulo", "Paulo", "Sapporo", "Semarang", "Sendai", "Seongnam", "Seoul", "Shanghai", "Shenyang", "Shenzhen", "Shiraz", "Shiziahuang", "Shubra El Khemia", "Shubra", "El Khemia", "Khemia", "ShubraElKhemia", "ShubraKhemia", "Shubra Khemia", "Singapore", "Sofia", "Soweto", "St Petersburg", "St. Petersburg", "StPetersburg", "Saint Petersburg", "SaintPetersburg", "Stockholm", "Surabaya", "Surat", "Suzhou", "Sydney", "Tabriz", "Taichung", "Taipei", "Tai Pei", "Taiyuan", "Tangshan", "Ta Shkent", "TaShkent", "Tashkent", "Tbilisi", "Tegucigalpa", "Tehran", "Tianjin", "Tijana", "Tokyo", "Marijuana", "Toronto", "Tripoli", "Tri Poli", "TriPoly", "Tripoly", "Tshwane", "Tshwana Pretoria", "TshwanaPretoria", "Pretoria", "Petoria", "Peteoria", "Tunis", "Ufa", "Ulsan", "Urumqi", "Vadodara", "Valencia", "Varanasi", "Vienna", "Viena", "Volgograd", "Vol Gograd", "Warsaw", "Wuhan", "Wuxi", "Xian", "Xuzhou", "Yangon", "Yaounde", "Yerevan", "Yokohama", "Yoko Hama", "Yoko", "Hama", "Zapopan", "Za Po Pan", "Za Popan", "Zhengzhou", "Zheng Zhou", "Sheng Zhou", "Sheng Sou", "Zibo", "Bangs", "Soda Springs", "SodaSprings", "Springs", "Bluff", "Placentia", "Fries", "Dinosaur", "American Fork", "Concrete", "Briny Breezes", "Whynot", "Hurt", "Ninety Six", "NinetySix", "96", "Cut and Shoot", "Cut & Shoot", "CutNShoot", "CutShoot", "CutandShoot", "Cut&Shoot", "Kill Devil Hills", "KillDevilHills", "Devil Hills", "DevilHills", "Kill Devil", "KillDevil", "Canadian", "Superior", "Atomic City", "Atomiccity", "Atomicity", "Okay", "Nowhere", "Hell", "Coward", "Three Way", "ThreeWay", "Threeway", "Reno", "Las Vegas", "LasVegas", "Vegas", "Climax", "OKC", "Oklahoma City", "Winnebago", "Uncertain", "Last Chance", "LastChance", "Lastchance", "Speed", "Oblong", "Cool", "Colon", "Pink", "BlueGrass", "Blue Grass", "Bluegrass", "Rainbow City", "RainbowCity", "Rainbow", "China", "City", "Hooker", "Popejoy", "London", "Edinburgh", "Manchester", "Music City", "MusicCity", "Musiccity", "Musicity", "Memphis", "Clarcksville", "Nashville", "Birgingham", "Glasgow", "Liverpool", "Bristol", "Oxford", "Cambridge", "Cardiff", "Brighton", "Newcastle-upon-Tyne", "Newcastle", "NewcastleuponTyne", "NewcastleTyne", "Newcastle Tyne", "Tyne", "Leeds", "Yorkshire", "York", "Inverness", "Culloden", "Bath", "Nottingham", "Aberdeen", "Chester", "Ambrose", "Amity Island", "AmityIsland", "Alphaville", "Asteriod City", "AsteroidCity", "Belleville", "Bedford Falls", "BedfordFalls", "Brahms", "Brigadoon", "Brightburn", "Bismuth", "Bristo Camino", "Bristo", "BristroCamino", "Catsville", "Chesterford", "Cloverdale", "Creek Falls", "CreekFalls", "Crystal Lake", "CrystalLake", "Damon", "Dammuz", "Deer Meadow", "DeerMedow", "Dillford", "Dogville", "Duloc", "Egging", "Flagstone", "Fly Creek", "FlyCreek", "Greenbow", "Greenhills", "Flinthills", "Green Hills", "Flint Hills", "Flinthill", "Groom Lake City", "Groom Lake", "Lake City", "Grouchland", "Haddonfield", "Harper", "Hilltop", "Hill Valley", "HillValley", "Hope", "Inferno", "Hope Town", "Hopetown", "Ivory Creek", "IvoryCreek", "Jonathanland", "Karatas", "Kartas", "Khansaar", "Hotha", "Kotha", "Liiian", "Loganville", "Madison", "Mantua", "Middleton", "Midlothia", "Middlesex", "Millbrook", "Mill Valley", "Millvalley", "Miles County", "MilesCounty", "Moesko Island", "Moesko", "MoeskoIsland", "Mos Eisley", "MosEisley", "Eisley", "Mos Espa", "Mosespa", "Espa", "Mt Abraham", "Mt. Abraham", "MtAbraham", "Mount Abraham", "Newton Haven", "Newton", "NewtonHaven", "Haven", "Nickeltown", "Nickles", "Nilbog", "Oak Ridge", "OakRidge", "Ogden Marsh", "Ogden", "OgdenMarsh", "Old Stump", "OlStump", "Ol Stump", "OldStump", "Peacock", "Perfection", "Pleasantville", "Pokyo", "Portoroso", "Pozharnov", "Pribrezhny", "Racoon City", "RacoonCity", "Radiator Springs", "RadiatorSprings", "Redmeption", "Regimenton", "Red Hill", "Redhill", "Rose Rock", "Rosehill", "Rockbridge", "Rock Ridge", "Rockridge", "Rock Vegas", "San Angeles", "San Miguel Arcangel", "San Miguel", "Miguel Archangel", "SanMiguel Arcangel", "SanmigelArcangel", "Sanford", "Sandford", "Santa Cecilia", "Cecilia", "Seabroook", "Sexville", "Silent Hill", "Silenthill", "Shermer", "Silver Creek", "Silvercreek", "Springwood", "Suburbicon", "Sweetwater", "Sylvane", "Tenderville", "Theed", "Tipoca City", "Tipoca", "Twin Peaks", "TwinPeaks", "Two-Bit", "2bit", "Verona", "Victory", "Waaji", "Waaji City", "WaajiCity", "Wardenclyffe", "Warden Clyffe", "Warren Valley", "WarrenValley", "Woodsboro", "Woop Woop", "WoopWoop", "Seattle", "San Francisco", "Francisco", "Roma", "Toronto", "Boston", "Pittsburg", "Whichita Falls", "Whichita", "Cleveland", "Denver", "Jacksonville", "Fort Worth", "Charlotte", "Columbus", "Indianapolis", "El Paso", "ElPaso", "Portland", "Louisville", "Baltimore", "Milwaukee", "Albuquerque", "Tucson", "Fresno", "Sacramento", "Mesa", "Alanta", "Kansas City", "KansasCity", "Colorado Springs", "Omaha", "Raleigh", "Virginia Beach", "Long Beach", "Oakland", "Bakerfield", "Tulsa", "Tampa", "Tampa Bay", "Arlington", "Wichita", "Wichita Falls", "Aurora", "New Orleans", "Honolulu", "Anaheim", "Henderson", "Orlando", "Lexington", "Stockton", "Riverside", "Corpus Christi", "Irvine", "Cincinnati", "Santa Ana", "Newark", "Saint Paul", "St.Paul", "St Paul", "St. Paul", "StPaul", "Durham", "Lincoln", "Jersey City", "Plano", "Anchorage", "North Las Vegas", "NLV", "St Louis", "St. Louis", "New Vagas", "Night City", "NC", "Nightcity", "Madison", "Chandler", "Gilbert", "Buffalo", "Chula Vista", "Fort Wayne", "Lubbock", "Toledo", "Laredo", "Irving", "Chesapeake", "Glendale", "Winston Salem", "Winston", "Salem", "Scottsdale", "Graland", "Boise", "Norfolk", "Spokane", "Richmond", "Fremont", "Huntsville", "Frisco", "Cape Coral", "Santa Clarita", "San Bernardino", "Tacoma", "Hialeah", "Baton Rouge", "Modesto", "Fontana", "McKinney", "Moreno Valley", "Des Moines", "Fayetteville", "Salt Lake City", "Salt Lake", "Yonkers", "Worcester", "Sioux Falls", "Little Rock", "Amarillo", "Tallahassee", "Grand Prairie", "Augusta", "Peoria", "Oxnard", "Knoxville", "Overland Park", "Overland", "Vancouver", "Grand Rapids", "Montgomery", "Huntington Beach", "Providence", "Brownsville", "Tempe", "Akron", "Chattanooga", "Fort Lauderdale", "Newport", "Newport News", "Mobile", "Ontario", "Cary", "Elk Grove", "Shreveport", "Eugene", "Santa Rosa", "Rancho Cucamonga", "Cucamonga", "Pembroke Pines", "For Collins", "Fort Brag", "Fort Sill", "Springfield", "Oceanside", "Garden Grove", "Murfreesboro", "Palmdale", "Corona", "Killeen", "Salinas", "Roseville", "Denton", "Surprise", "Macon", "Paterson", "Lakeood", "Hayward", "Charleston", "Hollywood", "Sunnyvalue", "Sunnydale", "Bellevue", "Joliet", "Naperville", "Escondido", "Bridgeport", "Savannah", "Olathe", "Mesquite", "Pasadena", "McAllen", "Rockford", "Gainesville", "Syracuse", "Pomona", "Visalia", "Thornton", "Waco", "Jackson", "Lakewood", "Fullerton", "Torrance", "Victorville", "Vicotoryville", "Midland", "Orange", "Miramar", "Hampton", "Warren", "Stamford", "Cedar Rapids", "Elizabeth", "Palm Bay", "Dayton", "New Haven", "Coral Springs", "Meridian", "West Valley City", "WVC", "Lewisville", "Sterling Heights", "Kent", "Carrollton", "Santa Clara", "Round Rock", "Roundrock", "Norman", "Athens", "Pearland", "Clovis", "Topeka", "College Station", "Simi Valley", "Allentown", "Wast Palm Beach", "WPB", "Thousand Oaks", "Vallejo", "Wilmington", "Rochester", "Concord", "Lakeland", "North Charleston", "Lafayette", "Arvada", "Independence", "Billings", "Ann Arbor", "Broken Arrow", "Indiahoma", "Berkeley", "Antioch", "High Point", "West Point", "Clearwater", "League City", "Electric City", "Evansville", "Waterbury", "West Jordan", "Las Cruces", "Westminster", "Lowell", "Nampa", "Pompano Beach", "Carlsbad", "Menifee", "Provo", "Elgin", "Greeley", "Beaumont", "Lansing", "Murrieta", "Goodyear", "Allen", "Tuscaloosa", "Everett", "Pueblo", "New Braunfels", "South Fulton", "Miami Gardens", "Grsham", "Temecula", "Rio Rancho", "Peoria", "Tyler", "Sparks", "Ventura", "Buckeye", "Downey", "Sugar Land", "Sugarland", "Costa Mesa", "Black Mesa", "Area 51", "Spokane Valley", "Davie", "Jurupa Valley", "Centennial", "Edison", "Boulder", "Dearborn", "Edinburg", "Hesperia", "Suffolk", "Yuma", "Lynn", "Quincy", "Palm Coast", "Vacaville", "Florance", "Annecy", "Amsterdam", "Mykonos", "Valletta", "Tallinn", "Lisbon", "Strasbourg", "Ghent", "Dubrovinik", "Reykjavik", "Lucerne", "Galway", "Barsov", "Aarhus", "Vilnius", "Split", "Bordeaux", "Marseille", "Innsburk", "Farnkfurt", "Santorini", "Brussels"],
   "Metropolis": ["Agrabah", "Alantica", "Autobot", "Autobot City", "AutobotCity", "Auto Bot City", "Cloud City", "CloudCity", "Emerald City", "EmeraldCity", "Mega City", "Megacity", "Mega-City", "Mega-City One", "Mega-City 1", "Megacity 1", "Megacity1", "Metropolis", "Metroville", "Monstropolis", "Ratropolis", "Zion", "Croix-des-Bouquets", "Croix des Bouquets", "Croix Bouquets", "Giza", "Manila", "Mandaluyong", "Male", "Dhaka", "Bnei Brak", "Caloocan", "Kolkata", "Kathmandu", "Makati", "Levallois Perret", "Guediawaye", "Montouge", "Bogota", "Vincennes", "Le Pre Saint Grevais", "Pre Saint Grevias", "Le Pre St Grevais", "St Grevais", "Saint Grevais", "Pasig", "Saint Mande", "St Mande", "St. Mande", "St. Grevais", "Le Pre St. Grevias", "Pre St. Grevias", "La Planta", "Planta", "Saint Josse ten Noode", "St Josse ten Noode", "St Josse", "St. Josse", "Saint Josse", "Guttenberg", "Malabon", "Pasay", "Neapolli", "Damascus", "San Juan", "SanJuan", "Navotas", "Asmara", "Mislata", "Macau", "Kaillithea", "Nea Smyrni", "NeaSymrni", "Union City", "Colombo", "L'Hospitalet", "L'Hositalet de Llobregat", "Llobregat", "Marikina", "Saint Gilles", "St. Gilles", "Clichy", "Kotsibuynske", "Boulogne-Billancourt", "Boulogne Billancourt", "Boulonge", "Billancourt", "Giv'atayim", "Givatayim", "Las Pinas", "LasPinas", "Pinas", "Koekelberg", "Bandung", "General Mariano Alverez", "Mariano Alverez", "GMA", "Monaco", "Les Lilas", "LesLilas", "Lilas", "Hoboken", "Pikine", "Quezon", "Quezon City", "Quezoncity", "Modi'in Illit", "Modi'in", "Illit", "Vanves", "Asnieres sur Seine", "AsnieresSurSiene", "Ciudad", "Cidad Nezahulcoyotl", "Nezahlcoyotl", "Silema", "Howrah", "Santa Coloma de Gramenet", "Chittagong", "Sint Jans Molenbeek", "Keur Massar", "KeurMassar", "Charenton le Pont", "La Garenne Colombes", "Schaerbeek", "Neuilly sur Seine", "Issy les Moulineaux", "Moulineaux", "Jakarta", "Bat Yam", "Batyam", "Gentilly", "Cario", "Mandaue", "Warabi", "Bacoor", "El'ad", "Beitar Illit", "Elad", "Senglea", "Cimahi", "San Pedro", "Lagos", "Kiryat Motzkin", "Gaza City", "Geneva", "Portici", "Chongqing", "Bengaluru", "Ahmedabad", "Dongguan", "Miami", "Atlanta", "Washington", "Washinton DC", "DC", "Jinan", "Guadalajara", "San Jose", "SanJose", "Detroit", "Minneapolis", "Antwerp", "Athena", "Greater Bristol", "Dnipro", "Gdansk", "Tricity", "Gothenburg", "Hauge", "Hannover", "Helsinki", "Katowice", "Karkow", "Kyiv", "Lille", "Lisborn", "Lodz", "Lyon", "Malaga Marbella", "Marbella", "Mannheim Ludwigshafen", "Ludwigshafen", "Mannheim", "Milan", "Naples", "Nantes", "Nice", "Bremen", "Nuremberg", "Oslo", "Ostrava", "Poznan", "Rhien Nord", "Dusseldorf", "Neuss", "Rhein Sud", "Cologne", "Bonn", "Riga", "Rotterdam", "Ruhr", "Saarbrucken", "Forbach", "Saratov", "Seville", "South Yorkshire", "Stuttgrat", "Toulouse", "Turin", "Tyne and Wear", "Wear", "Voroenzh", "West midlands", "Zagreb", "Zurich", "Randstad", "Flemish", "Flemish Diamond"],
   "Item Importing":   ["import", "download", "install", "mount", "collect", "item"],
   "World Timer Commands":   ["wtreset", "wtoff"],
   "Scrollbar Commands": ["fixscroller", "scrolliseverything", "scrollingitems", "showlicense", "changescroller"],
   "Wallet UX": ["send", "transfer", "utxo", "unspent", "transactions", "transact", "p2p", "hotswap", "bip", "bitcoin"],
   "Wallet UI": ["coin", "catch", "blockchain", "fetch", "crypto", "sweep", "virtualmachine", "proofofstake", "proofofwork"],
  "Bank & Exchange": ["spend", "forex", "casino", "gamble", "exchange", "trade", "markets", "bank", "hotswap", "xrp", "cdbc", "marketcrash"],
   "General Commands": ["resetlevel", "rosebud"]
};
let dict = {}, gramToCategories = {}, catDict = {}, categories = {}, loadedLines = [], parsedCategories = {}, allWords = [];
let dbReady=false, dbError=false, dbHashContent='', dbBtn = null, dbHashTabScrollTimeout = null, hashBtnTimer = null;
function makeGram(word) {word = word.trim().toLowerCase();if(word.length <= 4) return word;const tries = [ [3,3],[2,3],[4,3],[3,4],[5,3],[3,5],[2,4],[4,2],[2,5],[5,2],[4,4],[5,5] ];for(let [f,b] of tries) { if(word.length>=f+b) return word.slice(0,f)+':'+word.slice(-b);}return word;}
function combineGrams(cat, word) { return makeGram(cat) + ':' + makeGram(word);}
function uniqueGram(word, category, set) {let gram = makeGram(word);let i=1;while(set.has(gram)) { gram = makeGram(word+'#'+i++); if(i>99) break;}return gram;}
function parseRecList(lines) {let cat = null;parsedCategories = {};const regexCat = /^([\w &\-()]+):\s*(.*)/;for(const line of lines) {let ln = line.trim();if(!ln || ln.startsWith("//") || ln.startsWith("#") || ln.startsWith("<!--")) continue;let m = ln.match(regexCat);if(m) {cat = m[1].trim();let itemList = m[2].split(/,\s*/).filter(w => !!w);if(cat && itemList.length) parsedCategories[cat]=itemList;}}return parsedCategories;}
function fillDBFromParsed(parsed) {dict = {}; gramToCategories = {}; catDict = {}; categories = {}; allWords = [];for(const cat in parsed) {let items = parsed[cat];categories[cat] = {words:[],grams:new Set()};const catGram = makeGram(cat);catDict[catGram]=cat;for(const item of items) {const word = item.trim().toLowerCase();allWords.push(word);let gram = uniqueGram(word, cat, categories[cat].grams);categories[cat].grams.add(gram);dict[gram]=word;if (!gramToCategories[gram]) gramToCategories[gram]= new Set();gramToCategories[gram].add(cat);categories[cat].words.push(word);}}}
function parseEmbeddedDB() {parsedCategories = {};for(const cat in embeddedDatabase) {parsedCategories[cat]=embeddedDatabase[cat];}}
function getUnique(words) {let canonTrack = {};for(const w of words) {let canonical = canonicalize(w);canonTrack[canonical]=true;}return Object.keys(canonTrack);}
function getTabWordFooter(catName) {if(!dbReady||dbError||!categories[catName]) return "<span class='tab-footer'>Words: --- | Unique: ---</span>";let words = categories[catName].words;let unique = getUnique(words);return "<span class='tab-footer'>Words: "+words.length+" | Unique: "+unique.length+"</span>";}
function getOverallWordFooter() {if(!dbReady||dbError) return "<span class='tab-footer'>Words: --- | Unique: ---</span>";let unique = getUnique(allWords);return "<span class='tab-footer'>Words: "+allWords.length+" | Unique: "+unique.length+"</span>";}
let selectedTab = 'Help';
function buildTabs() {
  const tabsDiv = document.getElementById('tabs');
  tabsDiv.innerHTML = '';
  let tabNames = ['Help', ...Object.keys(categories).sort(), 'DB Hash']; // <<< Always include DB Hash!
  tabNames.forEach(name => {
    let tab = document.createElement('span');
    tab.textContent = name;
    tab.className = "tabBtn";
    if(selectedTab===name) tab.classList.add('selected');
    tab.onclick = () => {
      document.querySelectorAll('.tabBtn').forEach(b=>b.classList.remove('selected'));
      tab.classList.add('selected');
      selectTab(name);
      if(name=='DB Hash') setTimeout(()=>scrollTabToFarRight(),100);
    };
    tabsDiv.appendChild(tab);
  });
  handleTabArrows(tabsDiv);
}
function handleTabArrows(tabsDiv) {
  const tabLeft = document.getElementById('tabScrollLeft');
  const tabRight = document.getElementById('tabScrollRight');
  let canScroll = tabsDiv.scrollWidth > tabsDiv.clientWidth + 5;
  let atLeft = tabsDiv.scrollLeft < 5;
  let atRight = tabsDiv.scrollLeft + tabsDiv.clientWidth >= tabsDiv.scrollWidth - 5;
  tabLeft.style.display = (!canScroll || atLeft) ? 'none' : '';
  tabRight.style.display = (!canScroll || atRight) ? 'none' : '';
  tabLeft.onclick = () => {tabsDiv.scrollBy({left:-120,behavior:'smooth'});setTimeout(()=>{handleTabArrows(tabsDiv);},400);}
  tabRight.onclick = () => {tabsDiv.scrollBy({left:120,behavior:'smooth'});setTimeout(()=>{handleTabArrows(tabsDiv);},400);}
  tabsDiv.onscroll = ()=>setTimeout(()=>handleTabArrows(tabsDiv),120);
  setTimeout(()=>handleTabArrows(tabsDiv),250);
}
function scrollTabIntoView(tab, tabsDiv) {
  const tabRect = tab.getBoundingClientRect(), tabsRect = tabsDiv.getBoundingClientRect();
  if(tabRect.left < tabsRect.left || tabRect.right > tabsRect.right) {tab.scrollIntoView({behavior:'smooth',inline:'center',block:'nearest'});}
}
function scrollTabToFarRight() {
  const tabsDiv = document.getElementById('tabs');
  tabsDiv.scrollLeft = tabsDiv.scrollWidth;
  handleTabArrows(tabsDiv);
}
// --- DB Hash Vampire Export ---
function buildDBHashLive() {
  let cats = Object.keys(categories).sort();
  // Remove Help and DB Hash from hash export
  cats = cats.filter(cat => cat !== 'Help' && cat !== 'DB Hash');
  let str = '|Rec.List,..,'; //Recgonized Lists special header
  str += cats.length ? `${cats.length},..,` : "";
  cats.forEach(cat=>{ str+=cat+',..,'+categories[cat].words.slice().sort().join('|')+',..,'; });
  str += ',.cc.,iCS-WGE,..,,..|'; //Recgonized Lists special footer
  return btoa(str);
}
function showDBBtn() {
  if(dbBtn) return;
  const dbHashBtnWrap = document.getElementById('dbHashBtnWrap');
  dbHashBtnWrap.innerHTML = '';
  dbHashBtnWrap.style.display = '';
  dbBtn = document.createElement('button');
  dbBtn.textContent = 'DB Hash Now';
  dbBtn.className = 'overlayBtn';
  dbBtn.onclick = ()=>{
      selectTab('DB Hash');
      scrollTabToFarRight();
      fadeDBBtn();
  };
  dbHashBtnWrap.appendChild(dbBtn);
  // Decay/fade out after 3s if not clicked
  hashBtnTimer && clearTimeout(hashBtnTimer);
  hashBtnTimer = setTimeout(fadeDBBtn, 3000);
}
function fadeDBBtn() {
  if(!dbBtn) return;
  dbBtn.classList.add('fading');
  setTimeout(()=>{revokeDBBtn();},700);
}
function revokeDBBtn() {
  const dbHashBtnWrap = document.getElementById('dbHashBtnWrap');
  dbHashBtnWrap.innerHTML='';
  dbBtn=null;
  hashBtnTimer && clearTimeout(hashBtnTimer);
  hashBtnTimer = null;
}

// ---- Word-Gram Copy Logic ----
function copyToClipboard(val,el) {
  try {
    navigator.clipboard.writeText(val);
    el.style.color='#21bc7c'; // flash green
    setTimeout(()=>el.style.color='',500);
  } catch {
    alert("Copied: "+val);
  }
}
function gramWithCopy(gram) {
  return `<span class="neon-gram">${gram}</span>
<button class="copyBtn" title="Copy" onclick="copyToClipboard('${gram}',this)">&#128203;</button>`;
}

function selectTab(tab) {
  selectedTab = tab;
  const c = document.getElementById('tabContent');
  if(tab==='Help') {
    c.innerHTML = `<b>Welcome to iCS Word-Gram Encoder (iCS-WGE)</b>
<ul>
  <li><b>Category:</b> Enter/select category. System displays the calculated word-gram below for builder reference. ${gramWithCopy('category-gram')}</li>
  <li><b>Object Word:</b> Enter a word—system also gives word-gram. If present in multiple cats, all are listed. ${gramWithCopy('object-word-gram')}</li>
  <li><b>Adding:</b> Add both category and object together if new; see all word-grams here.</li>
  <li><b>Tabs:</b> Scrolls left/right, DB Hash tab is always far right. One per category, plus Help and DB Hash.</li>
  <li><b>DB Hash:</b> Click green-glow button between columns to get hash export (iCS format), click copy for Base64.</li>
  <li><b>Word counts:</b> Tab footer shows total and deduplicated word counts.</li>
</ul>
<button id='pickit' type="button" onclick="showFilePicker()">Import Dictionary Manually</button>
${getOverallWordFooter()}
    `;
    document.getElementById('filePickerWrap').style.display = 'none';
    document.getElementById('pickit').style.display = 'inline-block';
  } else if(tab==='DB Hash') {
    let liveHash = buildDBHashLive();
    c.innerHTML = `<textarea readonly>${liveHash||'No updates yet. Add data to generate hash.'}</textarea>
    <button type="button" onclick="copyToClipboard('${liveHash}',this)">Copy Base64 DB Hash</button>
    ${getOverallWordFooter()}`;
  } else if(categories[tab]) {
    if(categories[tab].words.length===0)
      c.innerHTML = '<em>No words in this category.</em>' + getTabWordFooter(tab);
    else
      c.innerHTML = '<b>Words:</b> '+categories[tab].words.slice().sort().join(', ') + getTabWordFooter(tab);
  } else
    c.innerHTML = '';
}

const catInput = document.getElementById('catInput'), catFeedback = document.getElementById('catFeedback'),
      catAddBtn = document.getElementById('catAddBtn'), wordInput = document.getElementById('wordInput'),
      wordFeedback = document.getElementById('wordFeedback'), wordAddBtn = document.getElementById('wordAddBtn'),
      dbHashBtnWrap = document.getElementById('dbHashBtnWrap');
let currentCat = '', catKnown = false, wordKnown = false, wordCats = [],
    catTimer = null, wordTimer = null;

catInput.onfocus = function() { catInput.value = ''; catFeedback.innerHTML = '&nbsp;'; revokeDBBtn(); };
wordInput.onfocus = function() { wordInput.value = ''; wordFeedback.innerHTML = '&nbsp;'; revokeDBBtn(); };
function resetCatUI() { catKnown=false; currentCat=''; catAddBtn.disabled=true; wordAddBtn.disabled=true; catFeedback.innerHTML='&nbsp;'; }
function resetWordUI() { wordKnown=false; wordCats=[]; wordAddBtn.disabled=true; wordFeedback.innerHTML='&nbsp;'; }
function inputCheckManager(field, checkFn) {
  let idleTimer;
  field.oninput = ()=>{
    clearTimeout(idleTimer);
    idleTimer=setTimeout(checkFn,1200); revokeDBBtn();
  };
  field.onblur = checkFn;
  field.onkeydown = (e) => { if(e.key==='Enter') {checkFn(); field.blur();} };
}
function checkCategoryInput() {
  if(!dbReady) {resetCatUI();return;}
  const raw = catInput.value.trim();
  if(!raw) {resetCatUI();return;}
  const catGram = makeGram(raw);
  const catGramHtml = gramWithCopy(catGram);
  if(catDict[catGram]) {
    catKnown=true; currentCat=catDict[catGram];
    catFeedback.innerHTML = `Known Category: ${catGramHtml}`;
    catAddBtn.disabled=true;
    wordAddBtn.disabled=wordInput.value.trim().length===0;
    if(wordInput.value.trim()) checkWordInput();
  } else {
    catKnown=false; currentCat=raw;
    catFeedback.innerHTML = `Not yet a category: ${catGramHtml}<br>Add?`;
    catAddBtn.disabled=false;
    wordAddBtn.disabled=wordInput.value.trim().length===0;
  }
}
inputCheckManager(catInput,checkCategoryInput);
catAddBtn.onclick = ()=>{
  if(!currentCat) return;
  if(!categories[currentCat]) { categories[currentCat] = {words:[],grams:new Set()}; catDict[makeGram(currentCat)]=currentCat; }
  buildTabs();
  setTimeout(()=>{ let tabsDiv = document.getElementById('tabs'); let targetTab = Array.from(tabsDiv.querySelectorAll('.tabBtn')).find(t => t.textContent===currentCat); targetTab && scrollTabIntoView(targetTab, tabsDiv); },200);
  selectTab(currentCat);
  catInput.value=currentCat;
  checkCategoryInput();
  setDBChanged();
};

function checkWordInput() {
  if(!dbReady) {resetWordUI();return;}
  const catRaw = catInput.value.trim();
  if(!catRaw) {resetWordUI();return;}
  const catGram = makeGram(catRaw), catGramHtml = gramWithCopy(catGram), catName = catDict[catGram] || catRaw;
  const raw = wordInput.value.trim().toLowerCase();
  if(!raw) {resetWordUI();return;}
  let gram = makeGram(raw), gramHtml = gramWithCopy(gram), comboGram = combineGrams(catRaw, raw), comboGramHtml = gramWithCopy(comboGram);
  let foundCats = [];
  for(let cg in gramToCategories) {
    if(dict[gram] && cg==gram) {
      foundCats=[...gramToCategories[gram]];
      break;
    }
  }
  wordCats=foundCats;
  if(foundCats.length>0) {
    wordKnown=true;
    wordFeedback.innerHTML=`Known word-gram: ${gramHtml}<br>
    Found in: ${foundCats.map(c=>'<span style="color:#eee">'+c+'</span>').join(', ')}
    <br>Combo: ${comboGramHtml}`;
    wordAddBtn.disabled = foundCats.includes(catName);
  } else {
    wordKnown=false;
    wordFeedback.innerHTML='Word '+gramHtml+' — will add.<br>Word-Gram: '+gramHtml +
      `<br>Category-Gram: ${catGramHtml}` +
      `<br>Combo-Gram: ${comboGramHtml}`;
    wordAddBtn.disabled = !catName;
  }
}
inputCheckManager(wordInput,checkWordInput);
wordAddBtn.onclick = ()=>{
  if(!dbReady) return;
  const catRaw = catInput.value.trim(), wordRaw=wordInput.value.trim().toLowerCase();
  if(!catRaw || !wordRaw) return;
  let catGram = makeGram(catRaw), catName = catDict[catGram] || catRaw;
  if(!categories[catName]) { categories[catName] = {words:[],grams:new Set()}; catDict[makeGram(catName)]=catName; buildTabs(); setTimeout(()=>{ let tabsDiv = document.getElementById('tabs'); let targetTab = Array.from(tabsDiv.querySelectorAll('.tabBtn')).find(t => t.textContent===catName); targetTab && scrollTabIntoView(targetTab, tabsDiv); },200); }
  let usedGrams = categories[catName].grams;
  let gram = uniqueGram(wordRaw,catName,usedGrams);
  usedGrams.add(gram); dict[gram]=wordRaw;
  if(!gramToCategories[gram])gramToCategories[gram]=new Set();
  gramToCategories[gram].add(catName);
  categories[catName].words.push(wordRaw); allWords.push(wordRaw);
  wordInput.value=wordRaw;
  checkWordInput();
  setTimeout(()=>{ let tabsDiv = document.getElementById('tabs'); let targetTab = Array.from(tabsDiv.querySelectorAll('.tabBtn')).find(t => t.textContent===catName); targetTab && scrollTabIntoView(targetTab, tabsDiv); },220);
  selectTab(catName);
  setDBChanged();
};

catInput.onfocus = revokeDBBtn; wordInput.onfocus = revokeDBBtn;

let expanded = false;
const indexBlock = document.getElementById('indexBlock'), collapseBtn = document.getElementById('collapseBtn');
function toggleIndex(expand=!expanded) {
  expanded=expand;
  if(expanded) { indexBlock.style.position="fixed"; indexBlock.style.left="0"; indexBlock.style.top="0"; indexBlock.style.width="100vw"; indexBlock.style.height="100vh"; indexBlock.style.zIndex="50"; collapseBtn.style.display=''; }
  else { indexBlock.style.position="relative"; indexBlock.style.width=""; indexBlock.style.height=""; indexBlock.style.zIndex=""; collapseBtn.style.display='none'; }
}
collapseBtn.onclick=()=>toggleIndex(false);

/* --- Loader Logic: fetch, filepicker, embedded fallback --- */
function tryFileFetch() {
  fetch('iCS Rec.list')
    .then(resp=>resp.text())
    .then(txt=>{
      loadedLines = txt.split(/\n/);
      parsedCategories = parseRecList(loadedLines);
      fillDBFromParsed(parsedCategories);
      dbReady=true; dbError=false;
      buildTabs(); selectTab('Help');
      document.getElementById('filePickerWrap').style.display = 'none';
    })
    .catch(e=>{
      dbReady=false; dbError=true;
      document.getElementById('tabContent').innerHTML =
        "<b style='color:#e88700'>Auto-load failed: "+(e.message||e)+
        "</b><br>Manual dictionary import available in Help tab — or fallback to built-in dictionary in 4 seconds.";
      setTimeout(()=>{
        if(!dbReady) fallbackToEmbedded();
      }, 4000);
    });
}
function fallbackToEmbedded() {
  parseEmbeddedDB();
  fillDBFromParsed(parsedCategories);
  dbReady=true; dbError=false;
  buildTabs();
  selectTab('Help');
  document.getElementById('filePickerWrap').style.display = 'none';
}
/* --- Manual dictionary import --- */
function showFilePicker() {
  document.getElementById('filePickerWrap').style.display = 'block';
  document.getElementById('pickit').style.display = 'none';
  document.getElementById('loadFileBtn').disabled = true;
}
function closeFilePicker() {
  document.getElementById('filePickerWrap').style.display = 'none';
  document.getElementById('pickit').style.display = 'inline-block';
  document.getElementById('filePicker').value = '';
  document.getElementById('loadFileBtn').disabled = true;
}
document.addEventListener("DOMContentLoaded", function() {
  let filePicker = document.getElementById('filePicker');
  let loadFileBtn = document.getElementById('loadFileBtn');
  if(filePicker && loadFileBtn) {
    filePicker.addEventListener('change', function() {
      loadFileBtn.disabled = !filePicker.files.length;
    });
    loadFileBtn.addEventListener('click', function() {
      if(!filePicker.files.length) return;
      const file = filePicker.files[0];
      const reader = new FileReader();
      reader.onload = function(ev) {
        loadedLines = ev.target.result.split(/\n/);
        parsedCategories = parseRecList(loadedLines);
        fillDBFromParsed(parsedCategories);
        dbReady=true; dbError=false;
        buildTabs(); selectTab('Help');
        closeFilePicker();
      };
      reader.onerror = function(ev) {
        document.getElementById('tabContent').innerHTML =
          "<b style='color:#e88700'>Manual load error: "+(ev.message||ev)+
          "</b><br>Falling back to built-in dictionary.";
        fallbackToEmbedded();
        closeFilePicker();
      };
      reader.readAsText(file, 'UTF-8');
    });
  }
});
function setDBChanged() {
  showDBBtn();
}
function initMaster() { tryFileFetch(); }
initMaster();

</script>
</body>
</html>
